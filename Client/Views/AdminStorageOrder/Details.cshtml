@using Client.Controllers
@using Client.Models
@model Client.Models.ViewModel.AdminStorageViewModel
@using Client.Services
@inject ImageService imageService


<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý dịch vụ khách hàng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    @{
        Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    }
</head>

<body>
    <div class="container mt-5">
        <h2 class="mb-4">Chi tiết đơn hàng #@Model.Id</h2>
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title">Thông tin người dùng</h5>
                <ul class="list-group">
                    <li class="list-group-item">Người dùng ID: @Model.NguoiDungId</li>
                </ul>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Thông tin đơn hàng </h5>
                <ul class="list-group">
                    <li class="list-group-item">Ngày đặt hàng: @Model.OrderDate</li>
                    <li class="list-group-item">Ngày nhập hàng: @Model.DateOfEntry</li>
                    <li class="list-group-item">Ngày xuất hàng: @Model.DateOfShipment</li>
                    <li class="list-group-item">Trạng thái đơn hàng: @Model.StatusOrder.GetDisplayName()</li>
                    <li class="list-group-item">Trạng thái kho: @Model.StatusStorage.GetDisplayName()</li>
                    <li class="list-group-item">Loại hàng hóa: @Model.TypeOfGoods.GetDisplayName()</li>
                    <li class="list-group-item">Số lượng: @Model.Quantity</li>
                    <li class="list-group-item">Giá: @Model.Price VND</li>
                </ul>
            </div>
        </div>
        <!-- Phần gallery hiển thị hình ảnh đơn hàng -->
        @if (Model.ImageUrls != null && Model.ImageUrls.Any())
        {
            <div class="card mt-4">
                <div class="card-body">
                    <h5 class="card-title">Hình ảnh đơn hàng</h5>
                    <div class="row">
                        @foreach (var imageFileName in Model.ImageUrls)
                        {
                            <div class="col-md-3 mb-3">
                                <div class="card">
                                    <img src="@await imageService.GetImageUrl(imageFileName)" class="menu-img" alt="Model.ImageUrls" style="height: 100px;" />
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        }
  

        @if (Model.StatusOrder == StatusOrder.Confirming)
        {
            <!-- Nếu trạng thái đơn hàng là Confirming (Đang xác nhận), hiển thị nút xác nhận -->
            <div class="mt-4">
                <a asp-controller="AdminStorageOrder" asp-action="ActiveOrder" asp-route-id="@Model.Id" class="btn btn-primary">
                    Xác Nhận Đơn Hàng
                </a>
                    <a asp-controller="AdminStorageOrder" asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary">
                       Chỉnh Sửa Ngày Nhập/ Xuất
                    </a>
                

            </div>
        }
        else
        {
            <!-- Nếu không phải trạng thái Confirming, hiển thị thông tin kho bãi -->
            <div class="card mt-4">
                <div class="card-body">
                    <h5 class="card-title">Thông tin kho bãi</h5>
                    <ul class="list-group">
                        <li class="list-group-item">Tầng: @Model.Floor</li>
                        <li class="list-group-item">Vị trí lưu trữ: @Model.LocationStorage</li>
                    </ul>
                </div>
            </div>
        }

       
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
</body>
</html>
